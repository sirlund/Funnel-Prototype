import{C as v}from"./Dw_zBlVh.js";import{d as p,w as N}from"./CD9t8njY.js";function F(r){var i,e,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(i=0;i<n;i++)r[i]&&(e=F(r[i]))&&(t&&(t+=" "),t+=e)}else for(e in r)r[e]&&(t&&(t+=" "),t+=e);return t}function I(){for(var r,i,e=0,t="",n=arguments.length;e<n;e++)(r=arguments[e])&&(i=F(r))&&(t&&(t+=" "),t+=i);return t}function d(r){return typeof r=="object"?I(r):r??""}const A=[...` 	
\r\fÂ \v\uFEFF`];function V(r,i,e){var t=r==null?"":""+r;if(e){for(var n in e)if(e[n])t=t?t+" "+n:n;else if(t.length)for(var f=n.length,s=0;(s=t.indexOf(n,s))>=0;){var u=s+f;(s===0||A.includes(t[s-1]))&&(u===t.length||A.includes(t[u]))?t=(s===0?"":t.substring(0,s))+t.substring(u+1):s=u}}return t===""?null:t}function w(r,i=!1){var e=i?" !important;":";",t="";for(var n in r){var f=r[n];f!=null&&f!==""&&(t+=" "+n+": "+f+e)}return t}function h(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function M(r,i){if(i){var e="",t,n;if(Array.isArray(i)?(t=i[0],n=i[1]):t=i,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var f=!1,s=0,u=!1,c=[];t&&c.push(...Object.keys(t).map(h)),n&&c.push(...Object.keys(n).map(h));var l=0,g=-1;const b=r.length;for(var o=0;o<b;o++){var a=r[o];if(u?a==="/"&&r[o-1]==="*"&&(u=!1):f?f===a&&(f=!1):a==="/"&&r[o+1]==="*"?u=!0:a==='"'||a==="'"?f=a:a==="("?s++:a===")"&&s--,!u&&f===!1&&s===0){if(a===":"&&g===-1)g=o;else if(a===";"||o===b-1){if(g!==-1){var O=h(r.substring(l,g).trim());if(!c.includes(O)){a!==";"&&o++;var j=r.substring(l,o).trim();e+=" "+j+";"}}l=o+1,g=-1}}}}return t&&(e+=w(t)),n&&(e+=w(n,!0)),e=e.trim(),e===""?null:e}return r==null?null:String(r)}function P(r,i,e,t,n,f){var s=r.__className;if(v||s!==e||s===void 0){var u=V(e,t,f);(!v||u!==r.getAttribute("class"))&&(u==null?r.removeAttribute("class"):i?r.className=u:r.setAttribute("class",u)),r.__className=e}else if(f&&n!==f)for(var c in f){var l=!!f[c];(n==null||l!==!!n[c])&&r.classList.toggle(c,l)}return f}function C(){const r={currentFunnel:null,currentVariant:null,currentStep:0,answers:{},pricing:null};try{const n=sessionStorage.getItem("funnelState");if(n){const f=JSON.parse(n);Object.assign(r,f)}}catch(n){console.warn("Failed to load funnel state from sessionStorage",n)}const{subscribe:i,set:e,update:t}=N(r);return i(n=>{try{sessionStorage.setItem("funnelState",JSON.stringify(n))}catch(f){console.warn("Failed to save funnel state to sessionStorage",f)}}),{subscribe:i,set:e,update:t,setFunnel:(n,f)=>{t(s=>({...s,currentFunnel:n,currentVariant:f,currentStep:0,answers:{}}))},saveAnswer:(n,f)=>{t(s=>({...s,answers:{...s.answers,[n]:f}}))},nextStep:()=>{t(n=>({...n,currentStep:n.currentStep+1}))},prevStep:()=>{t(n=>({...n,currentStep:Math.max(0,n.currentStep-1)}))},setPricing:n=>{t(f=>({...f,pricing:n}))},reset:()=>{e(r),sessionStorage.removeItem("funnelState")},clearAnswers:()=>{t(n=>({...n,answers:{},currentStep:0,pricing:null}))}}}const S=C();p(S,r=>r.answers);p(S,r=>r.currentFunnel);p(S,r=>r.currentVariant);p(S,r=>r.pricing);export{d as c,S as f,P as s,M as t};
